(ns aoc.day3
  [:require [clojure.string :as str]
            [clojure.set :as set]])

(def input "QJRBMDMtRDCtJzBtJMfjNjhwvmNDvwjLVVgh\nTPSNNPZGTjgmSmvfjL\nbPlpZZbpsTlTsWprpGFCJtRtzMNdMMBBcWnJQB\ntppvbQBhpQQdrzMMcLwhMc\ngZnWRccRNgFGRGRFRNNgZgJMddddLLLMCPqwLCNPwqPJ\nnRRmFSnWmlgZlTlTllSlSWWWTsfvfDQpBfBcpQvpVQpTfQQf\nlRlsVFgTlMgRNsSNTlFgmbWnMPppPnMqWZMWPPWW\nfDjgBJdCfCHHBnfLWpqnmnpZmf\nGjQHHcdvJHQBHSSNsFQFslwwRg\nNPwDLDHNwjLLHWjbdSbDfJJQTZsZDS\nBcFBcvgFvghnFLrBpvrgcgrJSZJpQdfSTZbCsSdfZZfbCf\nVrngVFRmrVWHLGVMlL\nSNBBBDlfZDLqNGmgFjjmBsQgCFtF\nVPPVbhpbhMhRhncnScRncbrQtCgQQFmjjjsgtRtQHmFQ\nnhWcPJVhpbvMvwvwllvSlGlD\nwNlNNqtqHHHPhqCz\nMMMMcQSWSpQCWFnRRPchLVvPLLzhmhLzhh\nCrgRSWrnrQpppRQrCTnRTRtGtBDBfbNBllbTJlZtfNBN\nQNbbNrnNnCwHmNPQmzqQNPsCCfBFFGtsBBddBDtCJDJd\ngvVgpZWgTWvRvlvLPDDJjGBfdsdpDDJGdd\nZRMWWRMVgRZghTggPSMZzQwwnqwmnzhNnNwHcQHm\nVmPHzBmpmQHbVHSpNHBVQCtRPPCPvFFMqqntZCZqMR\ndWlDcfcfcjcfDWjlsZfjJhdGvFLGnLsLqsRnvRvRGGRttC\nwfJhZTllcfdZdfjJfjdmQzHVSzHzgHQTpHpmpV\nqNnqmzmCBfvmDvBm\nHcdhtQdttbbhtVcrVVDMfZvdMBTqsWZMBsWZ\nHQGtctRblwqpNwRN\nSBtBLBMZzPDDNFFDQnVVVnnDmf\ndgCjblRdgRvrbwjJGzQQQzwJVJ\nWpWbCWWvlgrcCHdvvCdvWbSLZzhhZhtLBPPStSPhMSpM\nPlPnGGGzCqqlrqTRsbTmFRWgDPmR\nwwpLtjwpzjDwFWRsWTWW\nNZtJjHNNhHfnCBcJMBlCSz\nwSrwggPrhJhCdddw\ntLMNvMTFhDZdhTBh\nLtMvFttGbNcWRsLFLsccRRgfnSrPjPnfljSfPWlnPhrS\nTSZlwZSSccSHZLHVcllSvmDLmJhjDDffJmGjQjgQQJ\nsdBdzsNnBMBstNNMFhNPNbPzgGfDgJrtrfjCjDrCfJmmDQJf\nBnnBznRsFRFBsspzzbZpSTqVTpHVhpTvlqVW\nVtVjjhdFmCCfhRRzzSDbDzpmgzmvgb\nCHJqrswsWvbvJbpD\nCqCPcZHGHTcsCBQsBrTGHMFnLVQjMjLVVhdhnFQVRL\ntvlPSrlNNvtglTtPccldQdhbQbZdcqqZ\nmRmBGHWmDFRsZqHrfbdhqhZZ\njjMGjWrJpttNjtgg\nHPtCMJNjvJLMDZRdBgLSBSfsWBgG\nVmnrhwwqhbbzrwnDrqpdWBgfdSdfBGgffGWRdh\nqmnTFbVnpqVzpnvlDFJZDClNZPZN\nNNRFQfzbNWhLHTVh\ndGjptnrPqgvqjccvndnnPPhlHrVVTHLWMHlwmrlHMmVTWm\ntDggGnPqDcPPpPpddjGhggtJCCSssfJbQsDfbZsbsbRZFQ\nbqZWhbvvvqfvhqvQCChhZlllGwlwGjNRrNGrwGwNRQ\nPmspSscJVJStzSVzWJlgwlwNlGRLDGrPgNwN\npdHmWMVStWJWFBBCCbMhCfbC\nwtwbctGLwGWhGwfWwhNrnLrlrQFNmPNNVrrl\nCSdqZRsMStdJMMSZqPnFmVqPQlnjNjqj\nTMtsTBSSRZBCJStMJSZTHtfvpgvzzWwhbpwhggbzHpbW\nHncMbCwCncHlcbMDMnMFGsNsJVFJGchVTTcmcG\nRRfBRNjRLLJTLTThsq\nzpBRjWRrRvBpNtRWrgwbrwQPDPMDwCnn\nTDcPLTVRjntFwDwDnb\nSJJhffHqHZZgHGSFFbdrGTGnGv\nNQHWZgJQHNHgHQhlLLLBjpRTjLjMNNLM\nsMNnNRNrlGlsZBrGsrFQpclWlWLfpWjtzTfDtpzj\ngvhPgwTgdSHtHDtpDPLp\ngwhSwdvTSTbSgRrZNrrNFFNBGb\nrtZnDHJrrDtGtGHvGHDWfdfwCjcBhjBCffwwLv\nlzVlzsTRsmzVNTspVsMMsmwCLcmjmcdbBBChwfBbCW\nsVTMpTpppsVMsPRPVzMNFqMFwZtQrHZDGqgHZrSQQrQQJDGn\nwGQQMMQvCTPPQnHPBS\nFsWdJddszWrrRRJRTmRmpppRHBNPBppNHp\nrWdFWlFJzbzzMTwcvvMbGMgc\nWTnnTpqSnCLmjGgSgjztgg\nrQRHQvbNLwrgtGtrmDglJt\nPwHRNvQPsvHvPTTpLTcCLVnq\nqTsqJDJHjjfMCSDj\nRnGGNFGznzGVnBCWmfSMSLwWRwSj\nNnBbVQFVCClctHQc\nBHzmfDHfJLGcQBGgQLDcstNttlZgdlltldshgZZg\nPwPPSJwPvSNZlvSl\nCJwwjnJFFnWRMcMzcHMHRzGL\nrmZpvcZcqccsqmqzzzcBRLBZbBBRLBlRGVdfZR\nPwjFggwMDgNFwPgTwNFgtFJjfGLhBLsGRGbfBfBLbbTVLbdf\nDWJwgDWMJJDWCCNHmrnscmqqcnpWSQ\nbsRlVgMhtzHvhRvpzcLSZcTWLGzTTrGc\nQJnDjmqjJdmDqqrGWWsZsZTc\nnQPsnwCJdBDJDDJvhHhpMRCVlhlgRV\nNBNwMCtNgqCHClHClq\nJpQmFrQQfHfWjJTfLTjfLRRFRvnvhvnDGDcRcvVGGV\nHTzzpzzdHgbBZZtdMB\nSWcVvBFBVBjShWhGQtZnHFDHRGGQsR\npMZpmmJPbwbTTQttrDrRrttT\nmZflqdlbMVcNjdWLSj\ntvjdccdbLjhvhlcjRMvRTCQJmBPBCFRG\nqgnqZfHpZDVnCpZzZJQFQBgmmPFJBmRQJQ\nSHDZDDzpNVpfsNsHqpDSjLwCbbWLChwtwjtCWc\nFsWTbcwmGfFFFrpl\nLMhzdfqjLdHQQnSvldGvnS\nVZjVNzfNLtjzDMhVDNtqDqwJwRmmmZJgmgcbWgRRwCbJ\nZJbPwwfJcGlwCrrZrMMddMMMtt\npTNvvSSHmmnbpFRp\nSLSjSLDSQNLHNDbJbcfJclBzjGsz\nWSQCWQWstCWCCgNNsDCZMZDBjjlLPnHMMLPrHlcrcLHHTjTh\nbVFJFwfdRFFgjTPgnc\nGmzRRqvRddbdRRdfJRJfsqsSSsZDsDBQZtCSgpgt\nFPjprPpPCCFpFPHWsWvqnnllQsdLQMMlLtslLQMc\nwmzJgzRSRRJghBbwGBBSbtGfLfGlcNnlltdddQtrMd\nzDmRBmwDrpVFDTVDVp\nFPGqjsZGlDJmzsHcTcTMMs\nSQNLSvdbvVbrSbHcftGcrpHGfMmf\nCNNGSCCdSCZqjqljZF\nGvqpqrpqdqdsdGshSMhhRsSMhhlSlJ\nDLCzzjzBwCbQWtQlRRFRRJFptfffgM\nWzpLbLDbBcLPjWQWDBzzmnvNndHNqZqZNZNvcrNT\nscHCGfWHsvWHVfGsggHfgvVcSLwLLPRwwDLPLllRPDzlPr\ntbjqqNNTlPDTTSrD\nQntmNbNnnddqJqqbFJHZWWHWJWvZHGVJsSsp\nWZjpjwwGBGZQsqBLBHLHSRLP\nmJhtdfVtDVJtvVLSmNRSccPPPlNHcH\nJJLCFDhLCfVGGwbGGCwrGC\nnBnsGSCrptmsLWGhWRvVRJVJ\nrllMZZbcWWLJvhTl\nMHwzczHwwHqZcdzMdbqSmwsssmtNCrBmtrnQNB\nLzwrZNrNzBMrJBzJsfqqntMlVlSfhnhb\nHTDPWDHPTgGHWTGcPFRgFpPPtfqmsfqlccmlSmnblbshqnmm\njWGgpRGPFRHjzdBBsrBJvj\nhjNghjlwqjzGhwhGwLrMMrsMdsMfczPfsr\nZJQSFZFZpCTQSZHTTFbcWWPbWsWrdLVmrMWMfr\ntttHSCpFQBQQpJZSJLgBNNDhqhBqvBvvRq\nhLLJJJLcLPLfLwcJDchfhpSmqGbmdQGmGSdbqdbmqGGGdG\nzgCCVVvVCNVssdbqmtMWvbnndD\nrCCZZCVTjVZNzFZJBlflBLccDhBFFB\nwwPPHfCMHQsrcwPbMPMcvQFJvqWgFTZgDFJltgZt\njRBVLhpNqpBmRhhRdNJZJgWTBBtgZWltZJJJ\nmSjndhSzphjLRVqmhphNShrGMGrcbGbnGCHGwrwGfbbG\nPVBRhBdlwRtRhRBwtBlVzDcGpVcZnggGzGMMsg\nfFFWQqbFbLWCWvvFbTjjGnsZMfgsZcZzSZGMpSgD\nQJTCCLFFLjFqFbHTbbltmhBNwwcNmthNhlHr\nqwPJJsJdbPdwJddQCRCgCTMTRGGwMG\ncLFcFBZNWWQLSQRfZjpljTGRCgGR\ncFvrcNBFJDhzdQzv\nzTsVTqDqQNtNwwMVmN\npHpSzPbRrvbRrGzGMwZwlBJmNtclwJpB\nSjHRPfRbffPHqzCCCdTsTzqj\njnbMBnPjjjFtBtMjFPRtGfvvfzgWWHMfWHTlGgHH\ndCpdqrVrmdpHfTJTCWGJgG\nqVdrppqSTddqNwZcDPPPhZRBPBLBRLjF\nVbHqLlGQlgjLjjQsNvCZTsNjMtCZvT\nSJtttppwwpwBwdPvsvCvBZrvNrTrvM\nJDnWJpDSSpmSwmpPzSwznhDlqGqqtqqHGHLlhblGbR\nRqRJJVMPdRVVpqMdFwmvnSMwZcfCGfDSZc\nCssQgjssvZvjffmS\nzNlbbWTBLWCbCPPFPbVH\nnvQsHSsGvNvnQghTRMrrjpjM\nttlLDlzPtGDcRRtpZTFjtgMj\nPBLBwPPDzzLwblzffzLlVHHsCCHqsfvCCSsGSNWC\njHrTrThrtHgttThgHTtfgTgsmZZmBSZGSGsSGfZBZFFmQs\nqCCPdbcCJddbRcsQSGhFzmZqZGmq\nVVNNdVvclDcPbMWMwnnlwhphjp\nZdBgJqFWNNNqnZZNGsBCCCRvrCwCjCssCB\nhtDPMSPtMPzPTLMzMTMbRRbTbvwRCjfRfsbWWs\nLhMmtMDWmHlpppplJZJgNd\nmhtsjtbChcpLqmpmzL\nDPlPprrfBrpGHHVGNVHRqcNvvLLqLcvJzzTvLc\nVFfVPrrBQFPlDDwDwBpBtSgQjnghMhCdbSnnhtMM\nDPDMpbsHPDPNtdtrgMtdnQ\nWShWlSCJVlzccSBvBvhVZZWlgTNTrNrrQTjQjjjjgDSgSdNt\ncvmCDvCJCcsRbmpFmqms\nsSfFssmLnLwPtrrmttsFbDvWgCvddVgfgWdRDWlChD\nnnGnHBzqHjqBJGChlRClhvghJWDd\njNzNcczMcGntPMwwSsSr\nGGPCThCCvCTVWBCBGMVMsTgZJsrZtHNNtrsHJrgH\nzjRwcwwfvSjmwznfzQSHDJtgrNrRNrLDsRrHtD\nfjvzmcfSlSznwcnmnSQnhdlhWBpGpdBqhGhqhVPd\nsHGGqpRqfNRVbDDtVwwzWf\nCCLQZllTQLTcSShTQvjhQLnnWrDzVpwtDDwVDnczwMwM\nvggZLZTldlhpCTlZlZCRRPNRmqdmGBHPFqsGqN\nwwFDFLMDjjCNgNwNlwwgvR\nfrPbSJMSSPBqrfppSqrBZqMQhHlmNsRZmmslvghsmhsgggtZ\nTPSPfBQrdJSfTTqSbbBfTfdcGWjFWWFDWnGMjLjGVFCj\nLZRZbHtqnVztHTTTjMBQjQHH\nrJcDGpwwgDwCCWFGSFMSffVWfF\ncNNNgvhNglDnhdzsbLbmVs\nRwmrGVPmNLzdmVpmrVtHDjjgDHHRqjFtngFt\nCBlWhQWlTWshsblFGntjHtGbHG\nWsTSGZSTQZZJpPNdzSrzwvpr\nCVsggSgdwSwghVSTCgVZjJlRvlQNJHJGZVvjvj\nqrrnzrrpDFMzbDbbzrMbBcNjRBHHQHGRRllHHPBNBljl\nrnFppcpWcqnWMLDNsggSmWmsWfggdg\nwjQzPjJcplwmDDBL\nvghWhhnfWqzhftWtfnbFBmnGDnLGDbDmmC\nzZNvZrNsWfgVftNZhQcSdPHPTcPHQQTTJV\nWjvPVbWnbbFvjfLlcplQvLQvCwCl\nsJhmrrTRTDDJHhhsmJhmrNDdQwLQQlHllHwwLpCLclBBlcPC\nRJTRDdmPmmzNTDhnWtzMfMWtqjqqWM\nvvpjqtllDMlHDtDBsPSSfBJFlSffNS\ngwTmJrTcJWrNSmsNBBPfmf\nVzzJzgTnddzWrwngnWqbHqbtLqjqvpvqhbMd\nTlpzwGZGGFmZJdPpRtpHPrpcPs\nCMJCMgQjMQvrfMHtMfHv\nDjnNjCBqCCNnWWgDBQQDnCZwFJwmwwTznmFVwFmzTJJm\nCcDPppDCFdDrFcFsMsdlLVjjLsMHvM\nfqSmmtNGqLNffhHHbsMsbjbjNjbv\nSthSGmLnmfwfWGWhSQGSQRnGpDpJPCDJrBPTcPrDwPzFcpFT\nFdqjDtPWzqPdnPPtPFbssllqLJlqNppsJGppLp\nTwfrcvwRgvfTBWRgBssJhspHfffJHlHNGh\nMMZCQrrRBwQCCZMQwcTMwPztnFZSDWVWPttPSZzdzd\nprHlrpJbdccllrrPbFdrgPzZfZhZVhRZVScNRNWtSZjWRW\nLmwCCnvqwGCLMnsWtGRZWVfbfbftRW\nbwnvBnLBvbsBvszHzpgBlPzHHlzg\ngrSJNTSgBHgpqhvCGbbZddGCGbbT\nnDLMssQMRLwMtMWRWCZdQfqjfGvZQfCjCc\nPqsDWPMLnwlRllJzghmgmSNhpgrl\nTQGcWQBDnSzzsBSL\nmJJlqJwVJdbSrhlrlhhsLL\nJPtwMtdPbJbVqVNpPtmbpwZcQDFFcCccFjCQjpQWSWZg\nJfbfpZJmzffmpZnZZwsrwDFvwHPP\nRDdQtWTWQQSTGNRhsFsjnvjwrhPjtH\nQccddTVQQldcGGRdGlgmVmBzfVpDmbgggmpL\nHVnhVcHvpVFWDpmP\nQswNZblTTwmqlntDPdqD\nsGZzNwsGNThhMrhBBhzn\nfQllBlVQncgwLlfWwWDvppZZggZqGpZgpGdvGG\nshPTRsFbNFJmvqpGjrpvPDdr\nRNFDtRRRssRTStRmTlnzwSVQlVVWfWzcQc\nWmCpPCWTjQPCWWSjSTmrqRLGDRFGrTFDRFDLDD\ngJnVcnVzdfnZgchvrslMDZGlRRDZLR\nfdHhfncwfbfzJbnJzJfcczhhSmLCCNBjSpjmpjHjBQjpmpNW\nBDvDPGRwRvCmLssGLmsL\nfrRjjlldrqtNspLWpqFcCmzm\nndSnVNtllldrdfSjfNvgVRHBwbbVMRbVPJgH\nPpgjhpVLghPZhSgZVVzzcJWccPNCrcJzrFsJ\nBdBNNMqMdfDnDNTFHHJCqHrJHzrFzF\nwfMNtMndlBTlmTBndRpgghhjZRjvSZVjRw\nZQnQMWMcjHDHrWNF\nTvtCvvBVgdRdmvBVNzDHlGFjFHjfRfDD\ndvtCCbdJmhvhhhhbhVBPMwqZswnZqZjjMccsZJ\nDDMzRBBSzRDTMQRZsbvssCbhZtCDtP\ndLmwNplnmmwjGvPVCRtVVvVd\nNNmjLmqWJjFRwFSrgcrSHBzcTz\nTwTwTMBWcWBJJBtTWHddCmfgzlCzClsvmfsM\nPPLDnNqPRLQNVnGNVsDQnNmzdhvdddlvdlqgqmdlrfvv\nSQQsjPPLGLbDSnGLLNnWTFZJHbcpFctHZpwJWB\nFzMltgtMzFpZtmzdjPpnvRTQTvRWTDfnnTlvwW\nJcbVcBrqLCVJHJSNCcZVqVqqTRQRWWfNsTfTvDfsWvwTsnwv\nrcZqVJVhmhgPmhmd\nttvSnlWvWWgcScMDsHHMPMjPmH\npzLGLfNRpJsvmmfvMDfs\nGhpzRqqpZppNrhvFgwSlWnnBFn\nsbQcDJQJJDbQhwchSctVnVnqTMvMWSqTMPSMlP\njtjCtNRLNCRgRnlTPPWg\npzpHdLtFNdJbDhJHsQhs\npSqnfqDnWPHNPCCHCp\nGdJZQdgZbBvgQLcCZZCCZlPLRH\nPzBgQggbvBthtMdMvbzvVfFfzTWqDmWDqzqWrfff\nnnJdrfgfrdMCMdgrqMnWdgwNTTTzFhPSSHfSHhllzjzNFT\nvBRvmvGZsLZZsHFNFFzTNPzb\nLZVRmcDRvpQLmvvVGDGmpntJJwCWCnCPJwgJDrPDqM\nQddMvdzlVfvdSQmGhmwLbGbmzbns\nJtCCWqqZDsLpGhbGjD\nFNrhqCTWMSRSrQQg\nZsBZJFsZSmmJsJSmrJrJrvsrdGdCQGQphMGwRMGQRGdbBChM\nFlgfqNNNWnNnHfVnnHdbGwpwGWQhGdRMMdRM\nLFnggHlDqDLvjDmZPcPmvP\nCRHJWfvJvrQfrCsDlGGBszQBjjGB\nLmPHVnMmpLlPssBPlDtd\nMmMSZmVnncMFcmSVHvfSrffCwSvfbHWv\nwsrJrpdJLsMCZDWL\nBbLtGGbNmLQggqgQQtGgMmDCTnWZCZWZTmMmCZnT\nqNBGNNgQcbbtGbbFBLVjfcfwHvrHHJHJcr\npCZCpdjBljhjBlpVccCpbDDwRWDsLhLbwDsDwsDw\nHNgFSSNvSmdqwsFLFWLGttbw\ngMMndNrzNHnzJZVlMCMCTcpc\nCfsFNszCrrGzrsggsPfPVNVlqTdSjSqMTdSVTdLL\nvRhcHllwJDmnJmDMMdhqSqpVMhdjdp\ncvHRvwQBPZZlrQgz\nTsFhCtQtQsBBLtBLPvgz\njjWZZjZSMNlNNjljNnlmjjfJLMBGGLvBdzPQpggJJLQzpg\nwjbcmmlnQZmlrTsCFVwshwTr\nnRGFnFjcdlwLSHSpNNnBfWHN\nTgQvPbCMPRhbMPQvtQPvMCRBSHNQHBrQSNfWqpHHrWNWSf\nPCgMbPvTZVDgtPRggtCCbgmmFJJLmcGFLjdmJFcDwJmm\ndgWPssfdvQCLPLhL\npMtSMtpSmpMpFSMMFZjQCLbLQZZbVbVhNTLblZ\nmpqcpzncfWwhzfRf\nvntvVnRCsvpBpMjCpTpj\nrQdZfhzczNzWcNLTpWgSvjjjpGpMSB\nZqNDQhfcNchLchQqcDqRHJtHVwnwbtvHsbVs\nqtJGQgTrqtqQdQDgbGjPzZHWWzVjslPZlG\nvBShwRRvvSRSvFvwLSvfcnfBWmHZHVWWHPzlNPWVWjZsWnWV\ncLBFBFhCBLlwpFccFBFftqJDQdgdTDJJCbJgCCdg\nwfmsPvPwNfvmfLNFvzzJbRMnllhlnLhRLC\ngjtqDDTtjgpJcbnMTzCRnCCWhC\nSDqtpGSStVtdqpgBVjBGZmFPJNJmffvfPsHZPZQd\nHQMBBWrQQmPBvmBWnvrTnMSsbFfcfwgfCgscsmGgwgcJGg\nNzzlJLthtlgswGFcwGst\nJqNNRqpzhVRWTSQrrvSQ\nmFpDZjvmtPPGvFjmmGTzTcFRbHczHTbzQgRS\nfNdqhJsNrnnVNhwNVdrdsVczQCcwCMHSTCHgHCRzHgcM\nJlgnNhsqVqNqNpPlvZvDDDGlZZ\n")

(defn parse-input [input]
  (str/split input #"\n"))

(defn priority [item]
  (let [n (int item)]
    (cond
      (<= 97 n 122) (- n 96)
      (<= 65 n 90) (- n 38))))

(defn part1 []
  (->>
    (parse-input input)
    (map #(split-at (/ (count %) 2) %))
    (map (partial map set))
    (map (partial apply set/intersection))
    (map first)
    (map priority)
    (reduce +)))

(defn part2 []
  (->>
    (parse-input input)
    (partition 3)
    (map (partial map set))
    (map (partial apply set/intersection))
    (map first)
    (map priority)
    (reduce +)))